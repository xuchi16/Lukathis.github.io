I"°<h2 id="split-1-commit-into-2">Split 1 commit into 2</h2>

<p>Sometimes, we mistakely commit multiple files in one single commit while it actually did 2 things.
In this case, if we only hope to cherry-pick part of them to another branch, we have to split this commit into 2.
To realize this, we can use rebase command with the interactive mode.</p>

<p>The overall logic is just reoccur the whole change journey and you can arrange the stages as you want.</p>

<p>Hereâ€™re steps which can also be found here:
Break a previous commit into multiple commits <a href="https://stackoverflow.com/questions/6217156/break-a-previous-commit-into-multiple-commits">https://stackoverflow.com/questions/6217156/break-a-previous-commit-into-multiple-commits</a></p>

<ul>
  <li>
    <p>Start an interactive rebase with below command where <commit> is the commit you want to split. In fact, any commit range will do, as long as it contains that commit</commit></p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git rebase -i &lt;commit&gt;^
</code></pre></div>    </div>
  </li>
  <li>
    <p>Mark the commit you want to split with the action â€œeditâ€, yes, just change it in vim mode from â€œpickâ€ to â€œeditâ€</p>
  </li>
  <li>
    <p>Input â€œxâ€ to trigger the rebase</p>
  </li>
  <li>
    <p>When it comes to editing that commit, run this command. The effect is that the HEAD is rewound by one, and the index follows suit. However, the working tree stays the same</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git reset HEAD^
</code></pre></div>    </div>
  </li>
  <li>
    <p>Now add the changes to the index that you want to have in the first commit. You can use git add (possibly interactively) or git gui (or both) to do that</p>
  </li>
  <li>
    <p>Commit the now-current index with whatever commit message is appropriate now</p>
  </li>
  <li>
    <p>Repeat the last two steps until your working tree is clean</p>
  </li>
  <li>
    <p>Continue the rebase with command</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git rebase --continue
</code></pre></div>    </div>
  </li>
</ul>
:ET